<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>getAll - Google Drive CMS Demo</title>
  </head>
  <body>
    <div id="message"></div>
    <pre id="json"></pre>

    <script>
      const message = document.getElementById("message");
      const json = document.getElementById("json");

      function htmlEntities(str) {
        return String(str)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;");
      }

      fetch("https://google-drive-cms.herokuapp.com/api/v1/getAll")
        .then((response) => response.json())
        .then((res) => {
          document.getElementById("message").innerHTML = `Loaded ${
            Object.keys(res).length
          } files from cache.`;
          document.getElementById("json").innerHTML = htmlEntities(
            JSON.stringify(res, null, 2)
          );
        })
        .catch(console.error);
    </script>
  </body>
</html>
